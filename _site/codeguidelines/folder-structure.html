<p>Logical folder structure on disk differs from the folder structure inside the solution because their purpose is different.</p>

<p>On disk, we want to keep unit-test projects separated from runtime projects whereas in the solution, we want to have unit-test projects as close as possible to their corresponding runtime projects.</p>

<h2 id="logical-folder-structure">Logical folder structure</h2>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;repository-root&gt;</span>
├ src/
| ├ Project1/
| | ├ ...
| | └ Project1.csproj
| ├ Project2/
| | ├ ...
| | └ Project2.csproj
| └ ...
├ tests/
| ├ Project1.Tests/
| | ├ ...
| | └ Project1.Tests.csproj
| ├ Project2.Tests/
| | ├ ...
| |  Project2.Tests.csproj
| └ ...
├ .gitignore
├ LICENSE (not needed for internal projects)
├ README.md
└ SolutionA.sln
</code></pre></div></div>

<h2 id="solution-structure">Solution structure</h2>

<p>Depending on the type of project (simple service, 3-tier, CQRS/ES, …) you might group multiple library projects in solution folders.</p>

<h3 id="repository-pattern-solution-structure-3-tier-sample">Repository Pattern solution structure (3-tier sample)</h3>

<p>A typicall 3-tier application can be arranged like the example below:</p>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ProjectName (solution folder)
├ DataLayer (Project or Folder)
| ├ Repositories (folder)
| | ├ ProductRepository.cs
| | └ IProductRepository.cs
| ├ Models (folder)
| | ├ Product.cs
| | └ User.cs
| └ DataAcces (folder)
|   ├ UnitOfWork.cs
|   └ IUnitOfWork.cs
├ ServiceLayer (Folder)
| ├ Services/
| | ├ ProductService.cs
| | └ UserService.cs
| └ Utils/
|   ├ ViewModelFactory.cs
|   └ ProductLogic.cs
├ PresentationLayer (Web.UI Project)
| ├ Views/
| | ├ Index.cshtml
| | └ _userPartial.cshtml
| ├ Scripts/
| | ├ JavaScript.js
| | └ jQuery.min.js
| ├ Content/
| | ├ Site.css
| | └ Bootstrap.css
└ ...
</code></pre></div></div>

<h3 id="high-level-solution-structure-cqrses-sample">High-level solution structure (CQRS/ES sample)</h3>

<p>A CQRS/ES application contains a command-side, a query-side and a shared library that contains the messages. Depending on the size of the project and size of the teams the application will consist of one or more solutions.</p>

<p>In the example below, command- and query-side has been put into a single solution:</p>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Solution
├ Command/ (solution folder)
├ Query/ (solution folder)
├ Solution Items/ (solution folder)
└ SomeNamespace.Messages (project)
</code></pre></div></div>

<h3 id="commandquery-structure-cqrses-sample">Command/query structure (CQRS/ES sample)</h3>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Command/ (solution folder)
├ SomeNamespace.Command.Domain (project)
| ├ CommandHandlers/
| | ├ ProductCommandHandlers.cs
| | └ UserCommandHandlers.cs
| ├ Entities/
| | ├ Product.cs
| | └ User.cs
| └ Exceptions/
|   ├ ProductExceptions.cs
|   └ UserExceptions.cs
├ SomeNamespace.Command.Domain.Tests (project)
| ├ CommandHandlers/
| | ├ ProductCommandHandlersTests.cs
| | └ UserCommandHandlersTests.cs
| └ Entities/
|   ├ ProductTests.cs
|   └ UserTests.cs
├ SomeNamespace.Command.Host (servicehost or webhost project)
├ SomeNamespace.Command.Host.Tests (project)
└ ...
</code></pre></div></div>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Query/ (solution folder)
├ SomeNamespace.Query.Domain (project)
├ SomeNamespace.Query.Domain.Tests (project)
├ SomeNamespace.Query.Host (API project)
├ SomeNamespace.Query.Host.Tests (project)
└ ...
</code></pre></div></div>

<h3 id="t4-templates-cqrses-sample">T4 Templates (CQRS/ES sample)</h3>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Solution Items/ (solution folder)
└ Templates/ (solution folder)
  ├ Base.tt
  ├ Header.tt
  └ TypeDefinition.tt
</code></pre></div></div>

<h3 id="messages-project-cqrses-sample">Messages project (CQRS/ES sample)</h3>

<p>This project contains automatically generated command and event messages that are shared between command and query side.</p>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SomeNamespace.Messages (project)
├ Definitions/
| ├ Product.Commands.def
| ├ Product.Events.def
| ├ User.Commands.def
| └ User.Events.def
├ Commands.tt
| └ Commands.cs (generated)
└ Events.tt
  └ Events.cs (generated)
</code></pre></div></div>
