<h2 id="coding-style">Coding Style</h2>

<h3 id="tabs-vs-spaces">Tabs vs Spaces</h3>

<p>We use the default indentation of 4 spaces, no tabs.</p>

<h3 id="declare-all-member-variables-at-the-top-of-a-class-with-staticconst-members-at-the-very-top">Declare all member variables at the top of a class, with static/const members at the very top</h3>

<p>In general, we follow this order:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">private const</code></li>
  <li><code class="language-plaintext highlighter-rouge">private static readonly</code></li>
  <li><code class="language-plaintext highlighter-rouge">private readonly</code></li>
  <li><code class="language-plaintext highlighter-rouge">private</code></li>
  <li><code class="language-plaintext highlighter-rouge">public properties</code></li>
</ul>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">Developer</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="k">const</span> <span class="kt">string</span> <span class="n">Prefix</span> <span class="p">=</span> <span class="s">"NST"</span><span class="p">;</span>
    <span class="k">private</span> <span class="k">static</span> <span class="k">readonly</span> <span class="kt">string</span> <span class="n">Seed</span> <span class="p">=</span> <span class="n">Cryptography</span><span class="p">.</span><span class="nf">GenerateSeed</span><span class="p">(</span><span class="m">32</span><span class="p">);</span>

    <span class="k">private</span> <span class="k">readonly</span> <span class="kt">string</span> <span class="n">_language</span><span class="p">;</span>
    <span class="k">private</span> <span class="kt">int</span> <span class="n">_age</span><span class="p">;</span>

    <span class="k">public</span> <span class="kt">string</span> <span class="n">Number</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">public</span> <span class="kt">decimal</span> <span class="n">Wage</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

    <span class="c1">// Constructor</span>
    <span class="k">public</span> <span class="nf">Developer</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="curly-brackets-below-methodfunctionclass-definition">Curly brackets below method/function/class definition</h3>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Good</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">SomeMethod</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>

<span class="c1">// Bad</span>
<span class="k">public</span> <span class="kt">int</span> <span class="nf">CalculateHours</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>

<span class="c1">// Exception: property declarations</span>
<span class="k">public</span> <span class="kt">int</span> <span class="n">Id</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

<span class="c1">// Exception: if-statements with small one-line body</span>
<span class="k">if</span> <span class="p">(</span><span class="n">bookingService</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nf">ArgumentNullException</span><span class="p">(</span><span class="k">nameof</span><span class="p">(</span><span class="n">bookingService</span><span class="p">));</span>
</code></pre></div></div>

<h3 id="order-of-namespaces">Order of namespaces</h3>

<p>Order alphabetically but keep <code class="language-plaintext highlighter-rouge">System</code> directives on top.</p>

<h3 id="summarize-methods">Summarize methods</h3>

<p>Only summarize public methods that are exposed by the project.</p>

<p>This also includes ASP.NET Controller methods.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">/// &lt;summary&gt;</span>
<span class="c1">/// Description of what the method does.</span>
<span class="c1">/// &lt;/summary&gt;</span>
<span class="c1">/// &lt;param name="userId"&gt;An optional user id.&lt;/param&gt;</span>
<span class="c1">/// &lt;returns&gt;Does the method return a view? A result value?&lt;/returns&gt;</span>
<span class="k">public</span> <span class="n">IActionResult</span> <span class="nf">Index</span><span class="p">(</span><span class="kt">int</span> <span class="n">userId</span> <span class="p">=</span> <span class="k">null</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Make sure to keep summaries up-to-date!</p>

<h3 id="commenting">Commenting</h3>

<p>Writing and maintaining comments is expensive and it’s the first thing that gets outdated during refactoring or bugfixes.</p>

<blockquote>
  <p>If your feel your code is too complex to understand without comments, your code is probably just bad – Sammy Larbi</p>
</blockquote>

<p>Also read <a href="https://blog.codinghorror.com/coding-without-comments/">coding without comments</a>.</p>

<h3 id="spacing-between-functions-methods-and-field-declarations">Spacing between functions, methods and field declarations</h3>

<p>Try to keep your code files structured. In short: have the amount of whitespace that is easy on the eye. <strong>Think paragraph-like</strong>.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Good</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">Method</span><span class="p">(</span><span class="kt">int</span> <span class="n">number</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">variable</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Variable</span><span class="p">();</span>
    <span class="n">variable</span><span class="p">.</span><span class="n">Property</span> <span class="p">+=</span> <span class="n">number</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">statement</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">variable</span><span class="p">.</span><span class="n">Boolean</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">variable</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">variable</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">void</span> <span class="nf">AnotherMethod</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// Do Stuff</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Bad</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">Method</span><span class="p">(</span><span class="kt">int</span> <span class="n">number</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">variable</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Variable</span><span class="p">();</span>
    <span class="n">variable</span><span class="p">.</span><span class="n">Property</span> <span class="p">+=</span> <span class="n">number</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">statement</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">variable</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">variable</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">AnotherMethod</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// Do Stuff</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="usage-of-regions">Usage of regions</h3>

<p>Regions are a way to structure large blocks of code. However, since we believe in small methods and classes, we will not allow the usage of regions.</p>

<h3 id="working-with-lots-of-arguments">Working with lots of arguments</h3>

<p>When a constructor or method takes more than 3 arguments, sort them under each other instead of creating a long unwrapped list.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Good</span>
<span class="k">public</span> <span class="nf">AccountController</span><span class="p">(</span>
    <span class="n">IUnitOfWork</span> <span class="n">unitOfWork</span><span class="p">,</span>
    <span class="n">IObjectService</span> <span class="n">objectService</span><span class="p">,</span>
    <span class="n">ILogger</span> <span class="n">logger</span><span class="p">,</span>
    <span class="n">IHelper</span> <span class="n">helper</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">_unitOfWork</span> <span class="p">=</span> <span class="n">unitOfWork</span><span class="p">;</span>
    <span class="c1">// ...</span>
<span class="p">}</span>

<span class="c1">// Bad</span>
<span class="k">public</span> <span class="nf">AccountController</span><span class="p">(</span><span class="n">IUnitOfWork</span> <span class="n">unitOfWork</span><span class="p">,</span> <span class="n">IObjectService</span> <span class="n">objectService</span><span class="p">,</span> <span class="n">ILogger</span> <span class="n">logger</span><span class="p">,</span> <span class="n">IHelper</span> <span class="n">helper</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">_unitOfWork</span> <span class="p">=</span> <span class="n">unitOfWork</span><span class="p">;</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Also, when calling constructors or methods with more than 1 argument, use the argument names in the call. This makes the code safe against refactoring.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Good</span>
<span class="n">accountController</span><span class="p">.</span><span class="nf">AddAccount</span><span class="p">(</span><span class="n">username</span><span class="p">:</span> <span class="n">command</span><span class="p">.</span><span class="n">Username</span><span class="p">,</span> <span class="n">email</span><span class="p">:</span> <span class="n">command</span><span class="p">.</span><span class="n">Email</span><span class="p">);</span>

<span class="c1">// Bad</span>
<span class="n">accountController</span><span class="p">.</span><span class="nf">AddAccount</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="n">Username</span><span class="p">,</span> <span class="n">command</span><span class="p">.</span><span class="n">Email</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="valuetuples">ValueTuples</h3>

<p>The use of C# 7 <code class="language-plaintext highlighter-rouge">ValueTuple</code> is only allowed in private methods. Any public method should not take or return a <code class="language-plaintext highlighter-rouge">ValueTuple</code>.</p>

<p>If a public method needs to take or return a combination of multiple fields, create a result or context class with the required fields.</p>

<p>The problem with tuples is that you can easily swap values without the compiler (or you) noticing. Consider the examples below:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Bad: tuple elements get mistakenly swapped in calling code</span>
<span class="k">public</span> <span class="p">(</span><span class="kt">string</span> <span class="n">FirstName</span><span class="p">,</span> <span class="kt">string</span> <span class="n">LastName</span><span class="p">)</span> <span class="nf">GetPersonNameInfo</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">FirstName</span><span class="p">:</span> <span class="s">"Bob"</span><span class="p">,</span> <span class="n">LastName</span><span class="p">:</span> <span class="s">"Dylan"</span><span class="p">);</span>
<span class="p">}</span>

<span class="p">(</span><span class="kt">string</span> <span class="n">LastName</span><span class="p">,</span> <span class="kt">string</span> <span class="n">FirstName</span><span class="p">)</span> <span class="n">result</span> <span class="p">=</span> <span class="nf">GetPersonNameInfo</span><span class="p">();</span>

<span class="c1">// Bad: tuple elements get mistakenly swapped in method itself</span>
<span class="k">public</span> <span class="p">(</span><span class="kt">string</span> <span class="n">Firstname</span><span class="p">,</span> <span class="kt">string</span> <span class="n">LastName</span><span class="p">)</span> <span class="nf">GetPersonNameInfo</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="s">"Dylan"</span><span class="p">,</span> <span class="s">"Bob"</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Good</span>
<span class="k">public</span> <span class="n">PersonNameInfo</span> <span class="nf">GetPersonNameInfo</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">PersonNameInfo</span>
    <span class="p">{</span>
        <span class="n">FirstName</span> <span class="p">=</span> <span class="s">"Bob"</span><span class="p">,</span>
        <span class="n">Lastname</span> <span class="p">=</span> <span class="s">"Dylan"</span>
    <span class="p">};</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="usage-of-the--operator">Usage of the ? operator</h3>

<p>You can express calculations that otherwise need an <code class="language-plaintext highlighter-rouge">if-else</code> construction more concisely by using the conditional operator.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">bool</span> <span class="n">IsValid</span><span class="p">;</span>

<span class="c1">// If-Else construction</span>
<span class="k">if</span> <span class="p">(</span><span class="n">isValid</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">expression</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
    <span class="n">second_expression</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Conditional expression</span>
<span class="n">IsValid</span> <span class="p">?</span> <span class="n">expression</span> <span class="p">:</span> <span class="n">second_expression</span><span class="p">;</span>
</code></pre></div></div>

<p>We don’t force one way or the other, just use what is the most readable / understandable for the given situation.</p>

<h3 id="input-parameters-in-lambda-expressions">Input parameters in lambda expressions</h3>

<p>For simple and short lambda expressions, we allow the use of <code class="language-plaintext highlighter-rouge">x</code> as input parameter name. For more complex expressions, use full names.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Good</span>
<span class="kt">var</span> <span class="n">enabledUsers</span> <span class="p">=</span> <span class="n">users</span><span class="p">.</span><span class="nf">Where</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">IsEnabled</span><span class="p">);</span>
<span class="kt">var</span> <span class="n">enabledUsers</span> <span class="p">=</span> <span class="n">users</span><span class="p">.</span><span class="nf">Where</span><span class="p">(</span><span class="n">user</span> <span class="p">=&gt;</span> <span class="n">user</span><span class="p">.</span><span class="n">IsEnabled</span><span class="p">);</span>

<span class="c1">// Bad</span>
<span class="kt">var</span> <span class="n">enabledUsers</span> <span class="p">=</span> <span class="n">users</span><span class="p">.</span><span class="nf">Where</span><span class="p">(</span><span class="n">w</span> <span class="p">=&gt;</span> <span class="n">w</span><span class="p">.</span><span class="n">IsEnabled</span><span class="p">);</span>

</code></pre></div></div>
